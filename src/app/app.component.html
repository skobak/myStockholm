<main>
  <div fxLayout="row" fxLayout.xs="column" class='container'>
    <div fxFlex="408px" fxFlex.xs='20' class="sideMenu">
      <div class='siteName'>
        <mat-form-field class="full-width">
          <input type="text" [(ngModel)]="query" matInput autocomplete="off" placeholder="Search">
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
      </div>
      <ng-container *ngIf='(places$ | async) as place'>
        <div *ngIf='place.length===0'>
          <p class='noDataMessage'>Click somewhere on a map to add place to favorite ðŸ’œ</p>
        </div>
      </ng-container>
      <mat-nav-list>
        <mat-list-item (click)='focusOnPlace(place)' *ngFor='let place of places$ | async | searchFilter: query'>
          <span matLine>{{ place.name }}</span>
          <button mat-icon-button (click)="delete(place);$event.stopPropagation()">
            <mat-icon class='delete'>delete</mat-icon>
          </button>
        </mat-list-item>
      </mat-nav-list>
    </div>
    <agm-map fxFlex="80" fxFlex.xs='80' (mapReady)="mapReady($event)" [latitude]="lat" [longitude]="lng" [zoom]="zoom"
      (mapClick)='mapClick($event)'>
      <agm-marker *ngFor='let place of places$ | async | searchFilter: query' [latitude]="place.coords.lat" [longitude]="place.coords.lng"></agm-marker>
    </agm-map>
  </div>
</main>
